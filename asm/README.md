# 汇编反汇编工作流程

本目录包含了将 main.exe 反汇编并重新编译的完整工作流程。

## 文件说明

- `main.asm` - 原始的反汇编文件（由 dumpbin 生成）
- `main_disasm.asm` - 完整的二进制反汇编输出
- `main.obj` - 编译生成的目标文件
- `compile_asm.bat` - 反汇编脚本
- `reassemble.bat` - 重新编译脚本

## 使用方法

### 1. 反汇编 main.exe
```batch
compile_asm.bat
```

这个脚本会：
- 设置 UTF-8 编码
- 初始化 Visual Studio 2022 环境
- 使用 dumpbin 生成二进制反汇编
- 尝试从源码生成汇编代码

### 2. 重新编译（如果需要）
```batch
reassemble.bat
```

## 技术说明

### 反汇编类型
1. **二进制反汇编** (`main_disasm.asm`)
   - 直接从 PE 文件反汇编
   - 包含完整的机器码和汇编指令
   - 不能直接重新编译

2. **源码级汇编** (如果成功生成)
   - 从 C++ 源码编译生成
   - 可以用 ml64 重新编译
   - 保留符号信息

### 限制
- C++20 模块系统使得直接从源码生成汇编较为复杂
- 需要正确的模块接口文件 (.ifc)
- 某些编译器优化可能导致汇编代码难以理解

### 系统要求
- Windows 11
- Visual Studio 2022 (安装在 D:\Code\VS2022)
- C++20 支持
- UTF-8 编码支持

## 注意事项

1. 反汇编的代码仅供学习和调试使用
2. 重新编译可能需要额外的链接库和依赖
3. 优化级别会显著影响生成的汇编代码
4. 模块系统的依赖关系需要正确处理